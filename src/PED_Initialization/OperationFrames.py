'''
Created on 29 jun. 2018

@author: juan.bueno
'''
from enum import Enum

requestTemplate = "^PH24[0-9]{5}PTD0300[0-9]{14}(DI|RI)#[0-9]{7}#.+[\031]$"
OperationTemplate = "^PH24[0-9]{5}PDI0400[0-9]{14}R"
ackTemplate = "^PH24[0-9]{5}PTD0300[0-9]{14}MOK[\031]$"
nackTemplate = "^PH24[0-9]{5}PTD0300[0-9]{14}MNOK[\031]$"

LongHeader = 30
class Trame(Enum):
    ERROR = 0
    CEPSA_VENTA = 1
    PRUEBAV601 = 2
    PRUEBAV6 = 3
    CEPSA_IUN_1 = 4
    CEPSA_IUN_2 = 5
    CETELEM = 6
    TESTGAP = 7
    TOKEN_QUERY = 8
    
class Protocol(Enum):
    PROTOCOL_V3 = 0
    PROTOCOL_V5 = 0
    PROTOCOL_V6 = 0
    PROTOCOL_V601 = 0
    PROTOCOL_ALL = 0 
    
#Table with the frames to response. 
#    { ( ENUM with the type of response ) ,  }
OperationTrame = [ ( Trame.ERROR, Protocol.PROTOCOL_V6,'PH2400095PDI040099169993960000LERR###{0}#{1}#######S#SBGENM\n------------------------|      MOCK CSACT      ||  {2} - {3}  |------------------------\nERROR EN LOS DATOS\n\nPETICION INCORRECTA\n\n\n\n\n\n\n\n'),
                   ( Trame.CEPSA_VENTA, Protocol.PROTOCOL_V6, 'PH2401763PDI040099169997620000LACP#98813#{0}{1}#708346{2}#{3}#270195##0####{4}S#NAMESO\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\nPRUEBAS CEPSA-Integrac. CIF: A 12345678\n\nBODYIM9916999-TERMINALES\n\n\n\n*************************        CEPSA         **  Porque TU vuelves   *************************{5}         {6}************************NUMERO DE OPER: {3}\n\nAUT: CEPSA\n\nAUTORIZ: 270195\n\nTarj:***************3093************************\n\nPRDDTOLitros   P.Unid.   TotalGasoleo Extra\n\n {9}    {8}   {7}\n------------------------TOTAL:           {7}\nA PAGAR:         {7}\n************************IMTOTM*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************\n\n\n\nC#SBCUTMNAMESO\n\nPRUEBAS CEPSA-Integrac. CIF: A 12345678\n\nBODYIM9916999-HOOFDDORF\n\n\n\n*************************        CEPSA         **  Porque TU vuelves   *************************04-06-2018         10:27************************NUMERO DE OPER: {2}\n\nAUT: CEPSA\n\nAUTORIZ: 270195\n\nTarj:***************3093************************\n\nPRDDTOLitros   P.Unid.   TotalGasoleo Extra\n\n 10,00    1,000   10,00------------------------TOTAL:             10,00A PAGAR:           10,00************************IMTOTM*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************MPIEIO\n\n************************     MUCHAS GRACIAS     ************************\n\n\n\n708346000088243093#Q1##Q1##STAR#057##01509#1000#1000##LYT#1#171017#9345#209997009997003084180604102718009345#CEPSA#9997003084#999700#6#884974#1000#570##450#POS#ESTE ES MI CAMPO DE POS #123456789POS#ESTE ES MI CAMPO 2 DE POS #123456789ING#9916999#1806041025142223072282023721#190224#20180604102718'),
                   ( Trame.PRUEBAV601, Protocol.PROTOCOL_V601, 'PH2401763PDI040099169997620000LACP#98813#{0}{1}#708346{2}#{3}#270195##0####{4}S#NAMESO24#\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\nPRUEBAS CEPSA-Integrac. \nCIF: A 12345678\n\nBODYIM35#9916999-TERMINALES\n\n\n*************************************           CEPSA               ****      Porque TU vuelves        *************************************** FECHA: {5}               **** HORA:  {6}                 **** NUMERODE OPER: {3}         *************************************\n\n AUT: CEPSA\n\n AUTORIZ: 270195\n\n Tarj:********************3093****************************************\n\nPRDDTO24#Litros   P.Unid.   TotalGasoleo Extra\n\n {9}    {8}   {7}\n------------------------TOTAL:            {6}\nA PAGAR:          {7}\n************************IMTOTM24#*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************\n\n\n\nC#SBCUTM24#NAMESO24#\n\nPRUEBAS CEPSA-Integrac. CIF: A 12345678\n\nBODYIM24#9916999-HOOFDDORF\n\n\n\n*************************        CEPSA         **  Porque TU vuelves   *************************04-06-2018         10:27************************NUMERO DE OPER: {2}\n\nAUT: CEPSA\n\nAUTORIZ: 270195\n\nTarj:***************3093************************\n\nPRDDTO24#Litros   P.Unid.   TotalGasoleo Extra\n\n 10,00    1,000   10,00------------------------TOTAL:             10,00A PAGAR:           10,00************************IMTOTM24#*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************MPIEIO24#\n\n************************     MUCHAS GRACIAS     ************************\n\n\n\n708346000088243093#Q1##Q1##STAR#057##01509#1000#1000##LYT#1#171017#9345#209997009997003084180604102718009345#CEPSA#9997003084#999700#6#884974#1000#570##450#POS#ESTE ES MI CAMPO DE POS #123456789POS#ESTE ES MI CAMPO 2 DE POS #123456789ING#9916999#1806041025142223072282023721#190224#20180604102718' ) ,
                   ( Trame.PRUEBAV6, Protocol.PROTOCOL_V6, 'PH2401763PDI040099169997620000LACP#98813#{0}{1}#708346{2}#{3}#270195##0####{4}S#NAMESO\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\nPRUEBAS CEPSA-Integrac. CIF: A 12345678\n\nBODYIM9916999-TERMINALES          1234567890123456789012345678\n                          \n                          \n*****************************        CEPSA             **  Porque TU vuelves       *****************************{5}             {6}****************************NUMERO DE OPER: {3}         \n                          \nAUT: CEPSA                  \n                          \nAUTORIZ: 270195             \n                          \nTarj:*******************3093****************************\n                          \nPRDDTOLitros   P.Unid.   TotalGasoleo Extra\n\n {9}    {8}   {7}\n------------------------TOTAL:           {7}\nA PAGAR:         {7}\n************************IMTOTM*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************\n\n\n\nC#SBCUTMNAMESO\n\nPRUEBAS CEPSA-Integrac. CIF: A 12345678\n\nBODYIM9916999-HOOFDDORF\n\n\n\n*************************        CEPSA         **  Porque TU vuelves   *************************04-06-2018         10:27************************NUMERO DE OPER: 12\n\nAUT: CEPSA\n\nAUTORIZ: 270195\n\nTarj:***************3093************************\n\nPRDDTOLitros   P.Unid.   TotalGasoleo Extra\n\n 10,00    1,000   10,00------------------------TOTAL:             10,00A PAGAR:           10,00************************IMTOTM*************************   Tus Puntos Al Dia  **                      ** ACUMULADOS:      570 ** TODOS TUS PUNTOS:    **            884.974   **1000 PTOS-DESC = 1 EUR*************************MPIEIO\n\n************************     MUCHAS GRACIAS     ************************\n\n\n\n708346000088243093#Q1##Q1##STAR#057##01509#1000#1000##LYT#1#171017#9345#209997009997003084180604102718009345#CEPSA#9997003084#999700#6#884974#1000#570##450#POS#CAMPO DE POS DE PRUEBA #123456789ING#9916999#1806041025142223072282023721#190224#20180604102718' ) ,
                   ( Trame.CEPSA_IUN_1, Protocol.PROTOCOL_V6, 'PH2402088PDI040099169997620000LACP#22122#{0}{1}#903481{2}#{3}#361173##0####{4}S#SBGENM\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\nU.S.AEROPUERTO LADO AIREB 28354520\n1701609-BARCELONA\nCOM: 1701603085\nTERM: 170160\n{5}         {6}\n************************          STAR                   903481         ************************\n**************************  PREAUTORIZACION   **************************\nTarj:903481****902833\nCaduca: 04/20\nMatricula: MX001        NRO. DE OPER:       {3}NRO. AUTORIZ:     361173ID.OP: 000968\n\nKilometros: 52739\n\nGasoleo A\n Litros  P.Unid.   Total  74,63    1,340  100,00------------------------TOTAL C/IVA EUR:  100,00\n\n\n\n----FIRMA DEL CLIENTE---|                      ||                      ||                      |------------------------\n--FIRMA DEL EXPENDEDOR--|                      ||                      ||                      |------------------------\n\nUTILICE NUESTRA TARJETA. GRACIAS POR SU VISITA. \n\nSBGENM\nSBGENM\nC#SBGENM\nU.S.AEROPUERTO LADO AIREB 28354520\n1701609-BARCELONA\nCOM: 1701603085\nTERM: 170160\n{4}         {5}\n************************          STAR                   903481         ************************\n**************************  PREAUTORIZACION   **************************\nTarj:903481****902833\nCaduca: 04/20\nMatricula: MX001        NRO. DE OPER:       {2}NRO. AUTORIZ:     361173ID.OP: 000968\n\nKilometros: 52739\n\nGasoleo A\n Litros  P.Unid.   Total  74,63    1,340  100,00------------------------TOTAL C/IVA EUR:  100,00\n\n\nUTILICE NUESTRA TARJETA. GRACIAS POR SU VISITA. \n\n\n\n\n\n903481******2833#Q1#A#Q1###10000#000#01501#7463#1340##' ) ,
                   ( Trame.CEPSA_IUN_2, Protocol.PROTOCOL_V6, 'PH2402088PDI040099169997620000LACP#22122#{0}{1}#903481{2}#{3}#556986##0####{4}S#SBGENM\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\nU.S.AEROPUERTO LADO AIREB 28354520\n1701609-BARCELONA\nCOM: 1701603085\nTERM: 170160\n{5}         {6}\n************************          STAR                   903481         ************************\n**************************  PREAUTORIZACION   **************************\nTarj:903481****400234\nCaduca: 02/20\nMatricula: 0419-HHK                 NRO. DE OPER:       {3}NRO. AUTORIZ:     556986ID.OP: 000978\n\nKilometros: 4238 \n\nGasoleo A\n Litros  P.Unid.   Total  74,63    1,340  100,00------------------------TOTAL C/IVA EUR:  100,00\n\n\n\n----FIRMA DEL CLIENTE---|                      ||                      ||                      |------------------------\n--FIRMA DEL EXPENDEDOR--|                      ||                      ||                      |------------------------\n\nUTILICE NUESTRA TARJETA. GRACIAS POR SU VISITA. \n\nSBGENM\nSBGENM\nC#SBGENM\nU.S.AEROPUERTO LADO AIREB 28354520\n1701609-BARCELONA\nCOM: 1701603085\nTERM: 170160\n{4}         {5}\n************************          STAR                   903481         ************************\n**************************  PREAUTORIZACION   **************************\nTarj:903481****400234\nCaduca: 02/20\nMatricula: 0419-HHK                 NRO. DE OPER:       3097NRO. AUTORIZ:     556986ID.OP: 000978\n\nKilometros: 4238 \n\nGasoleo A\n Litros  P.Unid.   Total  74,63    1,340  100,00------------------------TOTAL C/IVA EUR:  100,00\n\n\nUTILICE NUESTRA TARJETA. GRACIAS POR SU VISITA. \n\n\n\n\n\n903481******0234#Q1#A#Q1###10000#000#01501#7463#1340##' ) ,
                   ( Trame.CETELEM, Protocol.PROTOCOL_V6, 'PH2402088PDI040099169997620000LACP#20602#{0}{1}#510033{2}#{3}#000449##0####{4}S#LOGOCM\n------------------------|      MOCK CSACT      ||  {5} - {6}  |------------------------\n\nNAMESOTRANS.TALAVERA-RECARGAS A 00000000\nBODYIM9992999-MADRID\nCOM:  008486474\nTERM:  999\n\n{5}         {6}*************************       CETELEM        *************************NRO. DE OPER:{3}\nAUT:  REDSYS-SER\nNRO. DE AUT.:  000449 CRETarj:***************4008M.ENT.:  FB  VERI.:  F\nORTEGA CABEZA/FRANCISCO **************************        VENTA       **************************\nPRDDTOGasoleo A\n {9}    {8}   {7}\n------------------------IMTOTMA PAGAR Eur:        {7}\nPUNTOO\n**************************     ACUMULACION    **************************\n\nPuntos Obtenidos:  70\nSaldo Actual:  1.297\n\n\nEquivalen a 6 Euros de\n  dcto. en combustible  \nFIRMAM\n\n----FIRMA DEL CLIENTE---|                      ||                      ||                      |------------------------\n\n\n COPIA PARA EL COMERCIO \n\nMPIEIO  CON ESTA OPERACION      HA ACUMULADO MAS        PUNTOS FAST           LINBLM\n\n\n\n\n\nSBCUTMC#LOGOCM\nNAMESOTRANS.TALAVERA-RECARGAS A 00000000\nBODYIM9992999-MADRID\nCOM:  008486474\nTERM:  999\n\n{4}         {5}*************************       CETELEM        *************************NRO. DE OPER:  {2}\nNRO. DE AUT.:  000449\nTarj:***************4008M.ENT.:  FB  VERI.:  F\nORTEGA CABEZA/FRANCISCO **************************        VENTA       **************************\nPRDDTOGasoleo A\n {8}    {7}   {6}\n------------------------IMTOTMA PAGAR Eur:        {6}\nPUNTOO\n**************************     ACUMULACION    **************************\n\nPuntos Obtenidos:  70\nSaldo Actual:  1.297\n\n\nEquivalen a 6 Euros de\n  dcto. en combustible  \nFIRMAM\n\n\n COPIA PARA EL CLIENTE  \n\nMPIEIO  CON ESTA OPERACION      HA ACUMULADO MAS        PUNTOS FAST           LINBLM\n\n\n\n\n\n5100330000034008#4 #1#4 #0#OPERACIONES VISA/MC#7000#000#01001#7000#1000#7000#AUT#546#180615#206284#630332008486474180807095812206284#REDSYS-SER#008486474#00000001#00000001##CRE####ING#9992999#1808070958122231021133020884#1520387161#20180807095812KVB#AUTH_DATA#OPCD@BA#AMNT@7000#PAN@000818500370005374#DCNT@0#AMBL@1297#AMAU@70#AMTP@PTS' ) ,
                   ( Trame.TESTGAP, Protocol.PROTOCOL_V6, 'PH2400312PDI040000000001520000LDEN#20611#28092018121159#541333000012#000003###0##0888##{4}S#SBGENM\nPRUEBAS PROSA\nA\n9924999-LEON\n\n28-09-2018         12:11------------------------** OPERACION ERRONEA ** ** ERROR DE CONEXION ** DATOS ERRONEOS\n------------------------\n\n\n\n\nING#9924999#1809281211582231021133002033##20180928121159' ) ,
                   ( Trame.TOKEN_QUERY, Protocol.PROTOCOL_V6, 'PH2400095PDI040099169993960000LACP#20602#{0}{1}#000843{2}#{3}###1####{4}S#SBGENM\nPRUEBAS CEPSA-Integrac. A 12345678\n9916999-HOOFDDORF\n\n04-10-2018         18:28------------------------STAR\n------------------------\n\n\n000843000000000000#a1#A#a1##STAR#000##01   #100#0000##KVB#CARD_DATA#5A@20099691102190952#57@20099691102190952=4912ING#9916999#1810041828482231021133001103#194171#20181004182848' )
                
                ]